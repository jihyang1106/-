<%-include('../main/head.ejs') %>
<link
  rel="stylesheet"
  type="text/css"
  href="/static/css/user/myPageBasic.css"
/>
<link rel="stylesheet" type="text/css" href="/static/css/user/myInfoDel.css" />
<script type="text/javascript" src="/static/script/user/myInfoDel.js"></script>
<%-include('../main/header.ejs') %>
<main id="back_color">
  <div class="container-fluid">
    <div id="del_box">
      <p><span style="font-weight: bold"><%=user_name%></span>님의</p>
      <p>냉장고에 <%=ingd_count%>개의 재료가</p>
      <p>잠들어 있습니다!</p>
      <p>
        마이페이지의 모든 기록은 삭제 되며, 삭제된 데이터는 복구 되지 않습니다.
      </p>
      <p id="text_none">마이페이지의 모든 기록은 삭제 되며,</p>
      <p id="text_none">삭제된 데이터는 복구 되지 않습니다.</p>
      <p class="mt-5">그래도 탈퇴하시겠습니까?</p>
      <form id="form_hidden">
        <input type="hidden" name="user_id" value="<%=user_id%>" />
        <div class="row">
          <div class="col text-center">
            <button
              type="button"
              id="button"
              class="btn mt-3 text-center"
              onclick="info_del()"
            >
              냉장고 코드 뽑기
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</main>
<script>
  async function info_del() {
    var form = document.getElementById("form_hidden");
    await axios({
      method: "delete",
      url: "/myPage/profile/myInfoDel",
      data: {
        user_id: form.user_id.value,
      },
    }).then(function () {
      localStorage.clear();
      Swal.fire({
        icon: "success",
        title: "회원 탈퇴가 완료되었습니다!",
        showConfirmButtom: true,
        confirmButtonText: "확인",
        confirmButtonColor: "#7E998F",
        preConfirm: () => {
          location.href = "/";
        },
      });
    });
  }
</script>
<%-include('../main/footer.ejs') %>
